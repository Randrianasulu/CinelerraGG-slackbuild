From 7793d129ab0e71c34531608fd37876eac8e6fbf4 Mon Sep 17 00:00:00 2001
From: Andrew Randrianasulu <randrianasulu@gmail.com>
Date: Wed, 11 Sep 2024 13:03:59 +0300
Subject: [PATCH] Add trc and primaries to ffmepg info

---
 cinelerra-5.1/cinelerra/ffmpeg.C | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/cinelerra-5.1/cinelerra/ffmpeg.C b/cinelerra-5.1/cinelerra/ffmpeg.C
index 5bbfebf8..c2b2205f 100644
--- a/cinelerra-5.1/cinelerra/ffmpeg.C
+++ b/cinelerra-5.1/cinelerra/ffmpeg.C
@@ -2558,6 +2558,14 @@ int FFMPEG::info(char *text, int len)
 		const char *rg = av_color_range_name(range);
 		report("/ range:%s\n", rg ? rg : unkn);
 
+		enum AVColorPrimaries primaries = st->codecpar->color_primaries;
+		const char *pr = av_color_primaries_name(primaries);
+		report("    color primaries:%s", pr ? pr : unkn);
+    		enum AVColorTransferCharacteristic trc = st->codecpar->color_trc;
+		const char *transfer = av_color_transfer_name(trc);
+		report("/ transfer characteristics:%s\n", transfer ? transfer : unkn);
+
+
 		AVRational sar = av_guess_sample_aspect_ratio(fmt_ctx, st, NULL);
 		AVRational display_aspect_ratio;
 		if(sar.num) {
-- 
2.39.4

