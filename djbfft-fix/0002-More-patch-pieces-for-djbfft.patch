From 86f813391e3e04f61c47eba289161d830484b80c Mon Sep 17 00:00:00 2001
From: Andrew Randrianasulu <randrianasulu@gmail.com>
Date: Tue, 9 Dec 2025 12:17:01 +0300
Subject: [PATCH 2/2] More patch pieces for djbfft

---
 cinelerra-5.1/thirdparty/src/djbfft-0.76.patch5 | 16 ++++++++++++++++
 cinelerra-5.1/thirdparty/src/djbfft-0.76.patch6 | 11 +++++++++++
 cinelerra-5.1/thirdparty/src/djbfft-0.76.patch7 |  9 +++++++++
 3 files changed, 36 insertions(+)
 create mode 100644 cinelerra-5.1/thirdparty/src/djbfft-0.76.patch5
 create mode 100644 cinelerra-5.1/thirdparty/src/djbfft-0.76.patch6
 create mode 100644 cinelerra-5.1/thirdparty/src/djbfft-0.76.patch7

diff --git a/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch5 b/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch5
new file mode 100644
index 00000000..9f9ee5e0
--- /dev/null
+++ b/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch5
@@ -0,0 +1,16 @@
+--- ./accuracy2.c.orig	2025-12-09 12:01:43.810451980 +0300
++++ ./accuracy2.c	2025-12-09 12:03:19.766453535 +0300
+@@ -1,11 +1,13 @@
+ #include <stdio.h>
+ #include <math.h>
++#include <stdlib.h>
+ #include "fftc4.h"
+ #include "fftc8.h"
+ #include "fftr4.h"
+ #include "fftr8.h"
+ #include "fftfreq.h"
+ 
++
+ unsigned int freq[8192];
+ complex8 testroots[8192];
+ complex4 x4[8192];
diff --git a/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch6 b/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch6
new file mode 100644
index 00000000..b6b4bb14
--- /dev/null
+++ b/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch6
@@ -0,0 +1,11 @@
+--- ./install.c.orig	2025-12-09 12:02:21.402452589 +0300
++++ ./install.c	2025-12-09 12:06:06.774456242 +0300
+@@ -4,6 +4,8 @@
+ #include "open.h"
+ #include "readwrite.h"
+ #include "exit.h"
++#include <sys/stat.h>
++#include <unistd.h>
+ 
+ extern void hier();
+ 
diff --git a/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch7 b/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch7
new file mode 100644
index 00000000..bb523067
--- /dev/null
+++ b/cinelerra-5.1/thirdparty/src/djbfft-0.76.patch7
@@ -0,0 +1,9 @@
+--- ./substdio.h.rig	2025-12-09 12:08:30.758458575 +0300
++++ ./substdio.h	2025-12-09 12:09:40.930459713 +0300
+@@ -1,3 +1,6 @@
++#include <errno.h>
++#include <sys/types.h>
++
+ #ifndef SUBSTDIO_H
+ #define SUBSTDIO_H
+ 
-- 
2.46.4

