From 289a77239a2f19f14a0d0f21db0bcfb984402019 Mon Sep 17 00:00:00 2001
From: Andrew Randrianasulu <randrianasulu@gmail.com>
Date: Sun, 26 Nov 2023 11:24:45 +0000
Subject: [PATCH 4/4] Change NetBSD build script/configure to ffmpeg v6

---
 cinelerra-5.1/blds/netbsd.bld | 10 +++++-----
 cinelerra-5.1/configure.ac    |  4 ++--
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/cinelerra-5.1/blds/netbsd.bld b/cinelerra-5.1/blds/netbsd.bld
index 5d961ee9..0e2c97a6 100755
--- a/cinelerra-5.1/blds/netbsd.bld
+++ b/cinelerra-5.1/blds/netbsd.bld
@@ -1,16 +1,16 @@
 #!/bin/bash
-#use: patch -p2 < bsd.patch
+#patch not needed anymore
 export CONFIG_SHELL=/bin/bash
 export MAKE=gmake
-export C_INCLUDE_PATH=/usr/local/include:/usr/X11R7/include:/usr/pkg/include:/usr/pkg/include/ffmpeg4
+export C_INCLUDE_PATH=/usr/local/include:/usr/X11R7/include:/usr/pkg/include:/usr/pkg/include/ffmpeg6
 export CPLUS_INCLUDE_PATH=/usr/local/include
 export LIBRARY_PATH=/usr/local/lib
-export LDFLAGS="-L/usr/X11R7/lib -L/usr/pkg/lib"
-export CFLAGS="-I/usr/pkg/include -I/usr/pkg/include/ffmpeg4 -pthread -I/usr/pkg/include -I/usr/pkg/include/OpenEXR -I/usr/pkg/include -I/usr/pkg/include/Imath"
+export LDFLAGS="-L/usr/X11R7/lib -L/usr/pkg/lib -L/usr/pkg/lib/ffmpeg6 "
+export CFLAGS1="-I/usr/pkg/include -I/usr/pkg/include/ffmpeg6 -pthread -I/usr/pkg/include -I/usr/pkg/include/OpenEXR -I/usr/pkg/include -I/usr/pkg/include/Imath"
 
 alias make=gmake
 ( ./autogen.sh
-  BSD=1 CC=gcc CXX=g++ CFLAGS="-g -fpermissive -O2 -DFFMPEG3" \
+  BSD=1 CC=gcc CXX=g++ CFLAGS=" ${CFLAGS1} -g -fpermissive -O2" \
   ./configure --with-single-user \
     --disable-static-build --without-lv2 --disable-lame --disable-twolame \
     --with-oss --without-alsa --without-firewire --without-dv --without-dvb \
diff --git a/cinelerra-5.1/configure.ac b/cinelerra-5.1/configure.ac
index 6e70fb18..f210281c 100644
--- a/cinelerra-5.1/configure.ac
+++ b/cinelerra-5.1/configure.ac
@@ -1281,13 +1281,13 @@ fi
 if test [ "$(uname)"] = "NetBSD" ; then
 echo "CFLAGS += -DNO_BTRACE"
 echo "CFLAGS += -DNO_CTX"
-echo "system_libs += -L/usr/pkg/lib/ffmpeg4"
+echo "system_libs += -L/usr/pkg/lib/ffmpeg6"
 echo "system_libs += -L/usr/pkg/lib/"
 echo "system_libs += -lpng16"
 echo "system_libs += -lintl"
 echo "system_libs += -lossaudio"
 echo "CFLAGS += -I/usr/X11R7/include"
-echo "CFLAGS += -I/usr/pkg/include/ffmpeg4"
+echo "CFLAGS += -I/usr/pkg/include/ffmpeg6"
 echo "CFLAGS += $(pkg-config --cflags xft)"
 echo "CFLAGS += -I/usr/pkg/include"
 echo "CFLAGS += -I/usr/pkg/include/uuid"
-- 
2.35.7

